@model IEnumerable<TechnicalService.Entity.Entities.Fault.Fault>
@using TechnicalService.BLL.Account
@{
    ViewBag.Title = "Faults";
    Layout = "~/Views/Shared/Layouts/_UserPageLayout.cshtml";
}
<!-- datatables -->

<link href="~/Areas/Management/lib/datatables/extras/TableTools/media/css/TableTools.css" rel="stylesheet" />
<link href="~/Areas/Management/css/style.css" rel="stylesheet" />

<div class="row">
    <div class="col-md-offset-1 col-sm-10 col-md-10 ">
        <h3 class="heading">Arızalar</h3>
        @if (ViewBag.Sonuc != null)
        {
            <div class="alert alert-info" role="alert">@ViewBag.Sonuc</div>
        }
        <table class="table table-striped  table-bordered dTableR" id="dt_a">
            <thead>
                <tr>
                    <th>
                        Oluşturma Tarihi
                    </th>
                    <th>
                        Başlık
                    </th>
                    <th>
                        Açıklama
                    </th>
                    <th>
                        Operatör
                    </th>
                    <th>
                        Teknisyen
                    </th>
                    <th>
                        Randevu Tarihi
                    </th>
                    <th>
                        Adres Açıklaması
                    </th>
                    <th>
                        Son İşlem
                    </th>
                    <th>İşlemler</th>

                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.CreateDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            @if (item.OperatorID != null)
                            {
                                @MembershipTools.GetUserFullName(item.OperatorID)
                            }
                        </td>
                        <td>
                            
                            @if (item.TechnicianID != null)
                            {
                                @MembershipTools.GetUserFullName(item.TechnicianID)
                            }
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.AppointmentDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Address)
                        </td>
                        <td>
                            @if (item.Statuses.Count > 0) {
                            @item.Statuses.Last().Status.ToString() 
                            @item.Statuses.Last().Description
                            }
                        </td>

                        <td>
                            @Html.ActionLink("Sil", "Delete", new { id = item.ID })
                        </td>
                    </tr>
                }
            </tbody>

        </table>

    </div>
</div>
<!-- datatable -->
<script src="~/Areas/Management/lib/datatables/jquery.dataTables.min.js"></script>

<script src="~/Areas/Management/lib/datatables/extras/Scroller/media/js/dataTables.scroller.min.js"></script>
<!-- datatable table tools -->
<script src="~/Areas/Management/lib/datatables/extras/TableTools/media/js/TableTools.min.js"></script>
<script src="~/Areas/Management/lib/datatables/extras/TableTools/media/js/ZeroClipboard.js"></script>
<!-- datatables bootstrap integration -->
<script src="~/Areas/Management/lib/datatables/jquery.dataTables.bootstrap.min.js"></script>

<!-- datatable functions -->
<script src="~/Areas/Management/js/gebo_datatables.js"></script>
<!-- additional sorting for datatables -->
<script src="~/Areas/Management/lib/datatables/jquery.dataTables.sorting.js"></script>
<!-- datatables bootstrap integration -->
<script src="~/Areas/Management/lib/datatables/jquery.dataTables.bootstrap.min.js"></script>
<!-- tables functions -->
<script src="~/Areas/Management/js/gebo_tables.js"></script>